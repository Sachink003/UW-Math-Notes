\documentclass[10pt]{article} 

\usepackage{fullpage}
\usepackage{bookmark}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[dvipsnames]{xcolor}
\usepackage{hyperref} % for the URL
\usepackage[shortlabels]{enumitem}
\usepackage{mathtools}
\usepackage[most]{tcolorbox}
\usepackage[amsmath,standard,thmmarks]{ntheorem} 
\usepackage{physics}
\usepackage{pst-tree} % for the trees
\usepackage{verbatim} % for comments, for version control
\usepackage{tabu}
\usepackage{tikz}
\usepackage{float}
\usepackage{etoolbox}

\lstnewenvironment{python}{
\lstset{frame=tb,
language=Python,
aboveskip=3mm,
belowskip=3mm,
showstringspaces=false,
columns=flexible,
basicstyle={\small\ttfamily},
numbers=none,
numberstyle=\tiny\color{Green},
keywordstyle=\color{Violet},
commentstyle=\color{Gray},
stringstyle=\color{Brown},
breaklines=true,
breakatwhitespace=true,
tabsize=2}
}
{}

\lstnewenvironment{cpp}{
\lstset{
backgroundcolor=\color{white!90!NavyBlue},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
basicstyle={\scriptsize\ttfamily},        % the size of the fonts that are used for the code
breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
breaklines=true,                 % sets automatic line breaking
captionpos=b,                    % sets the caption-position to bottom
commentstyle=\color{Gray},    % comment style
deletekeywords={...},            % if you want to delete keywords from the given language
escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
% firstnumber=1000,                % start line enumeration with line 1000
frame=single,	                   % adds a frame around the code
keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
keywordstyle=\color{Cyan},       % keyword style
language=c++,                 % the language of the code
morekeywords={*,...},            % if you want to add more keywords to the set
% numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
% numbersep=5pt,                   % how far the line-numbers are from the code
% numberstyle=\tiny\color{Green}, % the style that is used for the line-numbers
rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
showstringspaces=false,          % underline spaces within strings only
showtabs=false,                  % show tabs within strings adding particular underscores
stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
stringstyle=\color{GoldenRod},     % string literal style
tabsize=2,	                   % sets default tabsize to 2 spaces
title=\lstname}                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}
{}

% floor, ceiling, set
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\set}{\lbrace}{\rbrace}
\DeclarePairedDelimiter{\iprod}{\langle}{\rangle}

\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\mean}{mean}

% commonly used sets
\DeclareMathOperator{\N}{{\mathbb{N}}}
\DeclareMathOperator{\Q}{{\mathbb{Q}}}
\DeclareMathOperator{\Z}{{\mathbb{Z}}}
\DeclareMathOperator{\R}{{\mathbb{R}}}
\DeclareMathOperator{\C}{{\mathbb{C}}}
\DeclareMathOperator{\F}{{\mathbb{F}}}

\newcommand{\mbf}[1]{{\boldmath\bfseries #1}}

% proof implications
\newcommand{\imp}[2]{($#1\Rightarrow#2$)\hspace{0.2cm}}
\newcommand{\impe}[2]{($#1\Leftrightarrow#2$)\hspace{0.2cm}}
\newcommand{\impr}{{($\Rightarrow$)\hspace{0.2cm}}}
\newcommand{\impl}{{($\Leftarrow$)\hspace{0.2cm}}}

% align macros
\newcommand{\agspace}{\ensuremath{\phantom{--}}}
\newcommand{\agvdots}{\ensuremath{\hspace{0.16cm}\vdots}}

% convenient brackets
\newcommand{\brac}[1]{\ensuremath{\left\langle #1 \right\rangle}}

% arrows
\newcommand{\lto}[0]{\ensuremath{\longrightarrow}}
\newcommand{\fto}[1]{\ensuremath{\xrightarrow{\scriptstyle{#1}}}}
\newcommand{\hto}[0]{\ensuremath{\hookrightarrow}}
\newcommand{\mapsfrom}[0]{\mathrel{\reflectbox{\ensuremath{\mapsto}}}}

\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\chr}{char}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\disc}{disc}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Fix}{Fix}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\Nil}{Nil}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\Tor}{Tor}

\newcommand{\sset}{\subseteq}

\theoremstyle{break}
\theorembodyfont{\upshape}

\newtheorem{thm}{Theorem}[subsection]
\tcolorboxenvironment{thm}{
enhanced jigsaw,
colframe=Dandelion,
colback=White!90!Dandelion,
drop fuzzy shadow east,
rightrule=2mm,
sharp corners,
before skip=10pt,after skip=10pt
}

\newtheorem{cor}{Corollary}[thm]
\tcolorboxenvironment{cor}{
boxrule=0pt,
boxsep=0pt,
colback={White!90!RoyalPurple},
enhanced jigsaw,
borderline west={2pt}{0pt}{RoyalPurple},
sharp corners,
before skip=10pt,
after skip=10pt,
breakable
}

\newtheorem{lem}[thm]{Lemma}
\tcolorboxenvironment{lem}{
enhanced jigsaw,
colframe=Red,
colback={White!95!Red},
rightrule=2mm,
sharp corners,
before skip=10pt,after skip=10pt
}

\newtheorem{ex}[thm]{Example}
\tcolorboxenvironment{ex}{% from ntheorem
blanker,left=5mm,
sharp corners,
before skip=10pt,after skip=10pt,
borderline west={2pt}{0pt}{Gray}
}

\newtheorem*{pf}{Proof}
\tcolorboxenvironment{pf}{% from ntheorem
breakable,blanker,left=5mm,
sharp corners,
before skip=10pt,after skip=10pt,
borderline west={2pt}{0pt}{NavyBlue!80!white}
}

\newtheorem{defn}{Definition}[subsection]
\tcolorboxenvironment{defn}{
enhanced jigsaw,
colframe=Cerulean,
colback=White!90!Cerulean,
drop fuzzy shadow east,
rightrule=2mm,
sharp corners,
before skip=10pt,after skip=10pt
}

\newtheorem{prop}[thm]{Proposition}
\tcolorboxenvironment{prop}{
boxrule=0pt,
boxsep=0pt,
colback={White!90!Green},
enhanced jigsaw,
borderline west={2pt}{0pt}{Green},
sharp corners,
before skip=10pt,
after skip=10pt,
breakable
}

\setlength\parindent{0pt}
\setlength{\parskip}{2pt}

\newcommand{\subject}{MATH 138 \\ Honours Calculus 2}
\newcommand{\semester}{Winter 2023}
\newcommand{\professor}{Eddie Dupont}

\begin{document}
\let\ref\Cref

\title{\subject}
\author{Sachin Kumar\thanks{\itshape skmuthuk@uwaterloo.ca}\\ University of Waterloo}
\date{\semester\thanks{Last updated: \today}}

\maketitle
\newpage
\tableofcontents
% \listoffigures
% \listoftables
\newpage

\section{Integration}

\subsection{Introduction}
Consider the interval $[a, b]$,
If we sub-divide it into $n$ sub-intervals we get (for example) something called an increasing sequence $P = \{t_0, t_1, t_2, \dots, t_n\}$ a partition of the interval $[a, b]$. \\
The length of the $i^{\text{th}}$ sub-interval is given by $$\Delta t_i = t_i - t_{i-1}, \space \space i \in 1, 2, \dots, n$$
Next let $c_i \in [t_{i-1}, t_i]$.

\begin{defn}[Riemann Sum]
    Given a bounded function $f$ and partition $P$ over the interval $[a, b]$ with $c_i \in [t_{i-1}, t_i]$ a Riemann sum of $f$ w.r.t  $P$ is $$S = S(f, P) = \sum^{n}_{i=1}f(c_i)\Delta t_i$$
\end{defn}
Note:
\begin{enumerate}
    \item Different partitions $P$ or different choices for the $c_i$ will yield different values of $S$.
    \item The value $n$ can change from one Riemann sum to the next.
\end{enumerate}

Key Ideas:
\begin{enumerate}
    \item Shrink all $\Delta t_i$ down to zero thus increasing the “resolution” of the sum. We will end up with an $\infty \cdot 0$ situation which will hopefully balance out to give a finite value, call it $I$.
    \item If it turns out that the value of $I$ is independent of the partition $P$ and values $c_i$ then we say $f$ is integrable.
    \item We denote $||P|| = \max(\Delta t_1, \Delta t_2, \dots, \Delta t_n)$ so the previous condition can be written as $||P|| \to 0$ as $n \to \infty$.
    \item If our bounded function $f$ is integrable with value $I$ then we write $$I = \int^b_a f(t) \space dt$$ where $f(t)$ is the integrand, $dt $ is the variable of integration (aka dummy variable) and $a, b$ are the limits of integration.
    \item The notation $\int^b_a f(t) \space dt$ is called the definite integral of $f$ from $a$ to $b$.
    \item Note that $\int^b_a f(t) \space dt  = \int^b_a f(x) \space dx = \int^b_a f(u) \space du $  etc. is to be thought as $\sum^{n}_{i=1}f(i) = \sum^{n}_{k=1}f(k) = \sum^{n}_{p=1}f(p)$ etc.
\end{enumerate}
\begin{defn}[Regular $n$-partition]
The regular $n$-partition for an interval $[a, b]$ is where $\Delta t_i = \frac{b-a}{n}$ for each $i$. 
i.e., we divide $[a, b]$ into $n$ intervals of equal width.
\end{defn}
Eg: If we knew that $f(x) = e^x$ was integrable the one way to calculate its integral over $[1, 4]$ would be: $$\int^4_1 e^x \space dx = \lim_{n \to \infty} \sum^n_{i=1} e^{c_i}\Delta t_i$$ where $c_i \in [t_{n-1}, t_i]$. \\ \space \\
Assuming the regular $n$-partition we get, $$\Delta t_i = \dfrac{b-a}{n} = \dfrac{4-1}{n} = \dfrac{3}{n} = \Delta t$$ We can choose $c_i$ any way we like. One common way is to built a right-hand Riemann sum $(R)$ by letting, 
\begin{align*}
    c_i &= a + i \Delta t \\
    &= 1 + \dfrac{3i}{n}
\end{align*}
We could also make a left-hand Riemann sum $(L)$ by choosing,
\begin{align*}
    c_i &= a + (i-1) \Delta t\\
    &= 1 + \dfrac{3(i-1)}{n}
\end{align*}
Using $R$, we would get
\begin{align*}
    \int^4_1 e^x \space dx &= \lim_{n \to \infty} \sum^n_{i=1}f(c_i)\space \Delta t\\
    &= \lim_{n \to \infty} \sum^{n}_{i=1} e^{ \space 1 + \frac{3i}{n}} \bigg(\frac{3}{n} \bigg)\\
    &= \lim_{n \to \infty} \frac{3e}{n} \sum^n_{i=1} \big(e^{\frac{3}{n}}\big)^i \; \; \; \; \; \; \; \; \bigg[\text{recall } \sum^{n}_{i=1}r^i  = \frac{r^{n+1} - r}{r - 1}\bigg]\\
    &= \lim_{n \to \infty} \frac{3e}{n}\bigg(\frac{e^{\frac{3}{n} + 3} - e^{\frac{3}{n}}}{e^{\frac{3}{n} } - 1}\bigg)\\
    &= \frac{3e (e^3 - 1)}{3}\\
    &= e(e^3 - 1)
\end{align*} \\ \space \\
But is $f(x) = e^x $ integrable$?$
\begin{thm}[Integrability Condition]
If $f$ is continuous on $[a, b]$ then $f$ is integrable on $[a, b]$.
\end{thm}
Note: If $f$ is bounded with finitely many jump discontinuities then it is also integrable.


\subsection{Properties of Integration}
\begin{thm}[Properties of Integrals]
If $f$ and $g$ are integrable over $[a, b]$ then
\begin{enumerate}
    \item[a.] $\int^b_a cf(t) dt = c \int^b_af(t) dt$, for any $c \in \R$
    \item[b.] $\int^b_a[f(t) + g(t)] dt = \int^b_a f(t) dt + \int^b_a g(t) dt$
    \item[c.] If $m \le f(t) \le M$ then, $$m(b-a) \le \int^b_af(t) \le M(b-a)$$
    \item[d.] $|f|$ is integrable on $[a, b]$, then $$\Bigg|\int^b_a f(t) dt\Bigg| \le \int^b_a |f(t)| dt$$
\end{enumerate}
\end{thm}
\begin{pf}
Given any partition $P$ of $[a, b]$, note that $$\sum^n_{i=1}\Delta t_i = b-a$$
Since $m \le f(t) \le M$ we get that 
\begin{align*}
    \sum^n_{i=1}m \Delta t_i \le \sum^n_{i=1} f(t) \Delta t_i \le \sum^n_{i=1}M \Delta t_i\\
    m\sum^n_{i=1} \Delta t_i \le \sum^n_{i=1} f(t) \Delta t_i \le M\sum^n_{i=1} \Delta t_i
\end{align*}
This is true for every partition $P$ and so we end up with $$m(b-a) \le \int^b_a f(t) dt \le M(b-a)$$
\end{pf}
\begin{cor}
Properties of Integration
\begin{enumerate}
    \item[e.] Set $m=0$ in (c.) to get, if $f(t) \ge 0$ then $$\int^b_af(t) dt \ge 0$$
    \item[f.] If $f(t) \ge g(t)$ then use (e.), (b.) and (a.) to get $$\int^b_a f(t) dt \ge \int^b_a g(t) dt$$it can be proved by making a new function $h(t) = f(t) - g(t)$ (hint...)
    \item[g.] We define $\int^b_a f(t) dt = 0$. Our integration interval would be $[a, a]$ and so any Riemann sum we create would be of the form $$\sum^n_{i=1}f(a) \Delta t_i = f(a) \cdot 0 = 0$$
    \item[f.] For $a < b$ we have $$\int^b_a f(t) dt = - \int^a_b f(t) dt$$
\end{enumerate}
\end{cor}
The idea here is that writing $\int^b_a$ suggests moving from $a$ to $b$ where $t_{1-i}$ and $t_i$ are points on line $a$ to $b$ and $\Delta t_i > 0$.\\
Whereas $\int^b_a$ suggests moving from $b$ to $a$ where $\Delta t_i < 0$.
\begin{thm}
Given $a, b, c \in I$ over which $f$ is integrable then $$\int^b_a f(t) dt = \int^c_a f(t) dt + \int^b_c f(t) dt$$
\end{thm}
Note: It is not required that $a < c < b$. 
If $a< b< c$, we get
\begin{align*}
    \underbrace{\int^b_a f(t) dt}_{\text{Area b/w } [a, b]} &= \int^c_a f(t) dt + \int^b_c f(t) dt\\
    &= \underbrace{\int^c_a f(t) dt}_{\text{Area b/w }[a, c]} -\underbrace{\int^c_b f(t) dt}_{\text{Area b/w }[b, c]}
\end{align*}

\subsection{Areas and Integrals}
Note that $\int^b_a f(t) dt$ will only return the "expected" are when $f \ge 0$. Generally $\int^b_a f(t) dt$ returns the "signed" area.\\
That is if $f < 0$ over some interval $[c, d]$ then $\int^d_c f(t) dt$ will return the negative area between $f$ and the $x$-axis.\\ \space \\
Let the interval from $[a, b]$ have $2$-regular partitions, $c$ and $d$, where $a < c < d < b$. Assume $A_1, A_2, A_3 > 0$ (i.e., the normal area), where $A_1$ be the positive area from $[a, c]$, $A_2$ be the positive area from $[d, b]$ and $A_3$ be the negative area from $[c, d]$.
then $$\int^b_a f(t) dt = A_1 + A_2 - A_3$$
\textbf{Example:}
$\int^{2\pi}_0 \sin(t) dt = 0$, since $A_1$ and $A_2$ have equal areas, where $A_1$ is the positive area from $[0, \pi]$ and $A_2$ is the negative area from $[\pi, 2\pi]$.

\subsection{Average Value}
Recall the average of a discrete set $\{x_1, x_2, \dots, x_n\}$ is given by $$\dfrac{\sum^n_{i=1}x_i}{n}$$
We can define a similar concept for functions as follows:
\begin{defn}[Average Value]
    The average value of a continuous function over the interval $[a, b]$ is given by $$f_{ave} = \dfrac{1}{b-a}\int^b_a f(t) dt$$
\end{defn}
sometimes written as $\bar{f}$.\\ \; \\
\textbf{Example:}
Geometrically compute $f_{ave}$ over $[0,4]$ if $f(x)=3x$. \\
Geometrically, we have $$\int^4_0 3x dx = \dfrac{\text{base} \times \text{height}}{2} = \dfrac{4 \cdot 12}{2} = 24$$
so that $f_{ave} = \bar{f} = \frac{1}{4} \int^4_0 3x dx = \frac{24}{4} = 6$.\\ \; \\
In this case, $f_{ave}$ occurs halfway between 0 and 12. \\ \: \\
However, in all cases, $f_{ave}$ will split $f(x)$ into 2 parts of equal areas.
That is the area above $f_{ave}$ and below $f(x)$ will equal the area of both $f(x)$ and below $f_{ave}$. \\ 
This can be proven by shifting the $x$-axis to instead be $f_{ave}$. Let $g(x) = f(x) - f_{ave}$.\\
If the area above $y = f_{ave}$ is equal to the below $f_{ave}$ then we should get $\int^b_a g(x)d(x) = 0$. \\
Indeed, 
\begin{align*}
    \int^b_a g(x) dx &= \int^b_a f(x) - f_{ave} dx\\
    &= \int^b_a f(x) - \int^b_a f_{ave}dx \; \; \; \; \; [\text{Recall} f_{ave} = \dfrac{1}{b-a} \int^b_a f(x) dx]\\
    &= (b-a)f_{ave} - (b-a)f_{ave}\\
    &= 0
\end{align*}
It is always the case that for an integrable function, there is a $c \in [a,b]$ such that $f(c) = f_{ave}$? In general "no".\\
\begin{thm}[Average Value Theorem (AVT)]
    If $f$ is a continuous function on $[a,b]$ then there is a $c \in [a,b]$ such that $$f(c) = \frac{1}{b-a} \int^b_a f(x) dx$$
\end{thm}
\begin{pf}
    By Extreme Value Theorem (EVT), there are $p$ (min) and $q$ (max), where $p, q \in [a,b]$ such that $$f(p) \le f(x) \le f(q)$$
    By integral properties, 
    \begin{align*}
        (b-a) f(p) &\le \int^b_a f(x) dx \le (b-a)f(q)\\
        f(p) &\le \dfrac{1}{b-a} \int^b_a f(x) dx \le f(q)
    \end{align*}
    By the Intermediate value theorem, there is a $c \in [a, b]$ where $f(c)$ is the above equation.
\end{pf}

\subsection{Fundamental Theorem of Calculus (FTC)}
Up until now to compute $\int^b_af(t)dt$ we had to rely on geometry or, if using the definition, we need formulas to convert $\sum^n_{i=1}f(c_i) \Delta t_i$ to an explicit expression like $$\sum^n_{i=1}i^2 = \dfrac{n(n+1)(2n+1)}{6}$$
In many cases, this is not possible. \\ \: \\
Let us investigate how an integral behaves on a function on $x$. That is, \\
Let $A(x) = \int^x_a f(t) dt$ for a continuous function $f$. Now consider $x + h$ $$A(x+h) = \int^{x+h}_{a} f(t) dt$$
The incremental area is given by 
$$A(x+h) - A(x) = \int^{x+h}_{a}f(t) dt - \int^x_a f(t) dt = \int^{x+h}_x f(t) dt$$
Divide both sides by $h$ to get $$\dfrac{A(x+h) - A(x)}{h} = \dfrac{1}{h}\int^{x+h}_{a}f(t) dt$$
since $f$ is continuous, by AVT, $\exists c \in [x, x+h]$ such that $$\dfrac{A(x+h) - A(x)}{h} = f(c)$$
Also since $f$ is continuous and $c$ depends on $h$, $$\lim_{h \to 0} f(c) = f(x)$$
Finally by definition $$\lim_{h \to 0}\dfrac{A(x+h) - A(x)}{h} = A'(x)$$
Thus $A'(x) = f(x)$, i.e., $$\dfrac{d}{dx}\int^x_a f(t) dt = f(x)$$
\begin{thm}[Fundamental Theorem of Calculus I (FTC I)]
  If $f$ is continuous on an open interval containing $x$ and $a$, then $$\dfrac{d}{dx}\bigg[\int^x_a f(t) dt\bigg] = f(x)$$
\end{thm}
That is, the derivative \textbf{cancels} the integral.\\ \; \\
How does this help us compute $\int^b_a f(t) dt$? If we let $g(x) = \int^x_a f(t) dt$ then by FTC I, we know that $g'(x) = f(x)$ so we begin a search for a function $g(x)$
which after we take a derivative gives $f(x)$.
\\ \; \\
\textbf{Example:} Compute $$\int^5_3 2t dt$$
We need a function $g(x)$ such that $g'(x) = 2x$. That is we seek an antiderivative of $2x$ (Recall from MATH 137 that
given a function, any 2 antiderivatives of that function can differ by at most a constant.)\\
Let us denote $G(x) = x^2 + c$ as the family of antiderivatives of $2x$. By FTC I we have that 
$$G(x) = x^2 + c = \int^x_3 2t dt$$ since G'(x) = 2x \\ \: \\
But what is $c$? We know that $G(3) = 9 + c = \int^3_3 2t dt = 0$, so $c = -9$. Thus $$G(5) = \int^5_3 2t dt = 25 - 9 = 16$$
Notice that if we instead let $g(x) = x^2 + 4$ and evaluated $g(5) - g(3)$ we should still get 16. \\ \: \\
This leads us to: 
\begin{thm}[Fundamental Theorem of Calculus II (FTC II)]
  Let $F$ be any antiderivative of a continuous function $f$. Then, $$\int^b_a f(t) dt = F(b) - F(a)$$
\end{thm}
\textbf{Example:} Compute $$\int^4_1 \cos(x) dx$$
Using a Riemann sum would require a formula for $$\sum^n_{i=1} \cos(1 + \frac{3i}{n})$$ and then a limit as $n \to \infty$ \\ \: \\
Using FTC however we know that since $\frac{d}{dx} \sin(x) = \cos(x)$, we get $$\int^4_1 \cos(x) dx = \sin(4) - \sin(1)$$
Notation: The expression $g(x) \big |^b_a = g(b) - g(a)$ \\ \: \\
\textbf{Example:} 
\begin{align*}
  \int^1_{-1} |x| dx &= \int^0_{-1} (-x) dx + \int^1_0 (x) dx\\
  &= - \int^0_{-1} (x) dx + \int^1_0 (x) dx\\
  &= \dfrac{-x^2}{2} \bigg|^0_{-1} + \dfrac{x^2}{2} \bigg|^1_0\\
  &= \dfrac{1}{2} + \dfrac{1}{2} \\
  &= 1
\end{align*}
\subsubsection{Extended Fundamental Theorem of Calculus I}
We learned that $$\dfrac{d}{dx}\int^x_a f(t) dt = f(x)$$
What about $\frac{d}{dx} \int^a_x f(t) dt$ or $\frac{d}{dx} \int^{h(x)}_{g(x)} f(t) dt$? we solve these using the \textbf{chain rule}. \\ \; \\
\textbf{Example:} Compute $$\dfrac{d}{dx}\int^{\ln(x)}_{2} \sin(t^2) dt$$
Let $u = \ln(x)$ and let $g(u) = \int^u_2 \sin(t^2) dt$. \\
We seek $\frac{d}{dx}[g(u)]$, by chain rule $\frac{d}{dx}[g(u)] = \frac{d}{du}[g(u)] \cdot \frac{du}{dx}$. [We can end up with $\frac{d}{dx}$ by multiplying various derivatives, i.e. $\frac{du}{dt} \cdot \frac{dt}{dp} \cdot \frac{dp}{dx}$]\\ \: \\
Now, $\frac{du}{dx} = \frac{1}{x}$ and by FTC, $$\frac{d}{du}[g(u)] = \frac{d}{du} \int^u_2 \sin(t^2) dt = \sin(u^2)$$
so we get $$\frac{d}{dx}[g(u)] = \sin(u^2)\bigg(\frac{1}{x}\bigg)$$
i.e. $$\frac{d}{dx}\int^{\ln(x)}_{2} \sin(t^2) dt = \dfrac{\sin([\ln x]^2)}{x}$$ 
\textbf{General rule:} For a continuous $f$ and differentiable at $a(x)$ and $b(x)$, we get $$\dfrac{d}{dx} \int^{b(x)}_{a(x)} f(t) dt = f(b(x)) \cdot b'(x) - f(a(x)) \cdot a'(x)$$\\ \: \\
\textbf{Tip:}  Even if you can't find an explicit $F$ such that $F' = f$ you can "imagine" one exists. \\
Then by FTC II,
\begin{align*}
  \int^{b(x)}_{a(x)} f(t) dt &= F(b(x)) - F(a(x)) \\
  \dfrac{d}{dx} \int^{b(x)}_{a(x)} f(t) dt &= F'(b(x)) \cdot b'(x) - F'(a(x)) \cdot a(x)\\
  &= f(b(x)) \cdot b'(x) - f(a(x)) \cdot a'(x)
\end{align*}
\subsection{Indefinite Integrals}
So far we have defined $\int^b_a f(t) dt$ as the definite integral of $f$ over $[a, b]$. It evaluates to a number.
We call $\int f(x) dx$ the indefinite integral of $f(x)$. It is a function.
\\ \vspace{0.5ex} \\
Due to FTC, $\int f(x) dx$ represents the family of antiderivatives of $f(x)$. eg: $\int 4x + 3 dx = 2x^2 + 3x + C$
\subsubsection{Basic antiderivatives}
To help calculate $\int^b_a f(t) dt$, it will be handy to know the following 
\begin{itemize}
  \item $\int x^n dx = \frac{x^{n+1}}{n+1} + C$, \hspace{3ex} $n \ne -1$
  \item $\int \frac{1}{x} dx = \ln |x| + C$
  \item $\int e^x dx = e^x + C$
  \item $\int a^x dx = \frac{a^x}{\ln(a)} + C$, \hspace{3ex} $a > 0$ and $a \ne 1$
  \item $\int \sin(x) dx = -\cos(x) + C$
  \item $\int \cos(x) dx = \sin(x) + C$
  \item $\int \sec^2(x) dx = \tan(x) + C$
  \item $\int \frac{1}{1+x^2} dx = \arctan(x) + C$
  \item $\int \frac{1}{\sqrt{1-x^2}} dx = \arcsin(x) + C$
\end{itemize}
\vspace{1.5ex}
\textbf{Example: } Find $$\int 2x + \sin(x) - 1 dx$$
By linearity of integration we get $$\int 2x dx + \int \sin(x) dx - \int 1 dx = x^2 - \cos(x) - x + C$$
Generally, finding antiderivatives is quite hard and sometimes impossible,\\
eg: $e^{x^2}$, $\sqrt{1 + x^3}$, $\ln(\ln(x))$, $\sin(x^2)$.\\ \vspace{0.5ex} \\
When they do exists, finding them is much more of an art form compared to finding derivatives. We will introduce a few
techniques that will help.
\subsection{Substitution Rule}
First note that by FTC, $$\int g'(x) dx = \int \frac{d}{dx}[g(x)] dx = g(x) + C$$
Sometimes you will see this written as $$\int d[g(x)] = g(x) + C$$
Consider $\int \sin^3x \cdot \cos x dx$. Notice that $\cos x$ is the derivative of $\sin(x)$. In fact if we let
$u = \sin(x)$, then $\frac{du}{dx} = \cos(x)$, and our integrals becomes $$\int \sin^3 x \cdot \cos x dx = \int u^3 \frac{du}{dx} dx$$
Note that the derivative is NOT on the full integrand. \\ \vspace{0.5ex} \\
Recall however that from the chain rule $$\frac{d}{dx}[u(x)^4] = 4u^3 \cdot \frac{du}{dx}$$
This suggests that $$u^3 \cdot \frac{du}{dx} = \frac{d}{dx}\left[\frac{u(x)^4}{4}\right]$$
so our integral becomes, 
\begin{align*}
  \int u^3 \cdot \frac{du}{dx} dx &= \int \frac{d}{dx}\left[\frac{u(x)^4}{4}\right] dx \\
                                  &= \frac{u(x)^4}{4} + C \hspace{9ex} \text{(by FTC)}
\end{align*}
Notice that if we take the above integral and "cancel" the $dx$. We get $\int u^3 du$ which also yields $\frac{u^4}{4} + C$.
\\ \vspace{0.5ex} \\
When we identify $\int f(g(x)) \cdot g'(x) dx$, we can let $u = g(x)$ to get $$\int f(u) \cdot \frac{du}{dx} dx = \int f(u) du$$
In practice this lets us manipulate $du$ and $dx$. \\ \vspace{0.5ex} \\
For example in $\int \sin^3x \cdot \cos x dx$, let $u = \sin x$ so that $\frac{du}{dx} = \cos x$ or $dx = \frac{du}{\cos x}$ which gives 
$$\int u^3 \cdot \cos x \frac{du}{\cos x} = \int u^3 du = \frac{u^4}{4} + C = \frac{\sin^4 x}{4} + C$$
check that the derivative of $\frac{\sin^4 x}{4} + C$ yields to $\sin^3x \cdot \cos x$.
\textbf{Example: } $$\int 5xe^{x^2} dx$$
let $u = x^2$, then $du = 2x dx \implies dx = \frac{du}{2x}$ which gives
\begin{align*}
  \int 5xe^u \frac{du}{2x} &= \int \frac{5}{2}e^u du \\ 
                          &= \frac{5}{2}e^u + C \\
                          &= \frac{5}{2}e^{x^2} + C
\end{align*}
\subsubsection{How to choose $u$?}
There is no set rule for this. Often times you want to look for a function and its derivative appearing in the integrand.\\
eg: 
\begin{itemize}
  \item $\sin^3x \cdot \cos x \to u = \sin x$, $u'= \cos x$
  \item $5xe^{x^2} \to u = x^2$, $u'=2x$
  \item $\frac{\ln x}{x} \to u = \ln x$, $u' = \frac{1}{x}$
\end{itemize}
but this will not always work. \\ \vspace{0.5ex} \\
\textbf{Example:} $$\int x^3 \sqrt{x^2 - 4} dx$$
It seems like since $\frac{d}{dx}[x^3] = 3x^2$ we should let $u = x^3$.
If we try we end up with $du = 3x^2 dx$. 
\begin{align*}
  \int x^3 \sqrt{x^2 - 4} dx = \int u \sqrt{x^2 - 4} dx &= \int u \sqrt{x^2 - 4} \frac{du}{3x^2}\\
  &= \frac{1}{3} \int \frac{u}{x^2} \sqrt{x^2 - 4} du\\
\end{align*}
Now since $u = x^3$, $u^{\frac{2}{3}} = x^2$, which gives 
$$\frac{1}{3} \int \frac{u}{u^{\frac{2}{3}}} \sqrt{u^{\frac{2}{3}} - 4}du = 
\frac{1}{3} \int \frac{u}{u^{\frac{1}{3}}} \sqrt{u^{\frac{2}{3}} - 4} du \dots$$
Ideally we would end up at one of our basic antiderivative formulas like $\int x^n dx$ or $\int \sin (x) dx$, so we should
try something else. \\
There will be lots of \textbf{trial and error}.

\subsubsection{Trigonometric Substitutions}
Recall that 
\begin{align*}
  1 - \sin^2\theta = \cos^2 \theta\\
  \tan^2 \theta + 1 = \sec^2 \theta\\
  \sec^2\theta - 1 = \tan^2 \theta
\end{align*}
When an integrand involves an expression such as $a^2 - x^2, x^2 + a^2$ or $x^2 - a^2$ then, based on the formulas
above we sometimes make the following substitutions.
\begin{align*}
  \text{for } a^2 - x^2 \hspace{4ex} &\text{ try } x = a\sin \theta, \hspace{2ex} \theta \in \left[\frac{-\pi}{2},\dfrac{\pi}{2} \right]\\
  \text{for } a^2 + x^2 \hspace{4ex} &\text{ try } x = a\tan \theta, \hspace{2ex} \theta \in \left[\frac{-\pi}{2},\dfrac{\pi}{2} \right]\\
  \text{for } x^2 - a^2 \hspace{4ex} &\text{ try } x = a\sec \theta, \hspace{2ex} \theta \in \left[{-\pi},\dfrac{-\pi}{2} \right) \cup \left[0,\dfrac{\pi}{2} \right)\\
\end{align*}
Usually we only need to do this for things like $(a^2 - x^2)^p$, $(a^2 + x^2)^p$ and $(x^2 - a^2)^p$ when $p$ is a fraction.
\\ \vspace{0.5ex} \\
\textbf{Example:} Find
$$\int \dfrac{x}{\sqrt{9 + x^2}} dx \hspace{5ex} \text{ (we could do } u = 9 + x^2 \text{ but let's say we didn't notice)}$$
Let $x = 3 \tan\theta$ with $\theta \in \left[\frac{-\pi}{2},\frac{\pi}{2} \right]$\\
$dx = 3 \sec^2 \theta d \theta$
so we get, 
\begin{align*}
  \int \dfrac{x}{\sqrt{9 + x^2}} dx &= \int \dfrac{3 \tan \theta}{\sqrt{9 + 9 \tan^2 \theta}}\cdot 3\sec^2 \theta d \theta\\
  &= 3  \int \dfrac{\tan \theta \sec^2 \theta}{\sqrt{1 + \tan^2 \theta}} d \theta\\
  &= 3  \int \dfrac{\tan \theta \sec^2 \theta}{\sqrt{\sec^2 \theta}} d \theta\\
  &= 3  \int \dfrac{\tan \theta \sec^2 \theta}{|\sec \theta|} d \theta\\
  &= 3  \int \dfrac{\tan \theta \sec^2 \theta}{\sec \theta} d \theta \hspace{3ex} \text{ since } \theta \in \left[\frac{-\pi}{2},\frac{\pi}{2} \right]\\
  &= 3 \int \sec \theta \tan \theta d \theta\\
  &= 3 \sec \theta + C
\end{align*}
\subsubsection{What is $\sec \theta$ in terms of $x$?}
Since $$x = 3 \tan \theta \implies \frac{x}{3} = \tan \theta$$
so, $$\sec \theta = \frac{\sqrt{x^2 + 9}}{3}$$
We get a final answer of 
\begin{align*}
  &= 3 \left(\frac{\sqrt{x^2 + 9}}{3}\right) + C\\
  &= \sqrt{x^2 + 9} + C
\end{align*}
\textbf{Example:} Find\\
$$\int \dfrac{x^2}{\sqrt{1 - x^2}} dx$$
Let $x = \sin \theta$



\end{document}